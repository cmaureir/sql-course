

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Lecture 18 - Higher-order functions &mdash; sql-course 1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="sql-course 1 documentation" href="../../index.html" />
    <link rel="up" title="Fifth week" href="index.html" />
    <link rel="next" title="Lecture 19 - Iterators" href="lecture19.html" />
    <link rel="prev" title="Lecture 17 - Advanced topics on functions" href="lecture17.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="lecture19.html" title="Lecture 19 - Iterators"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="lecture17.html" title="Lecture 17 - Advanced topics on functions"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">sql-course 1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Fifth week</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="lecture-18-higher-order-functions">
<h1>Lecture 18 - Higher-order functions<a class="headerlink" href="#lecture-18-higher-order-functions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="list-comprehension">
<h2>List comprehension<a class="headerlink" href="#list-comprehension" title="Permalink to this headline">¶</a></h2>
<p>Remembering the <em>list</em> chapter,
we can learn an extra topic about the list iteration
structure, the list comprehension.</p>
<p>A simple example of this new characteristic can be
the following example,   from the official python wiki,
in a section called <a class="reference external" href="http://wiki.python.org/moin/PythonSpeed/PerformanceTips">Performance Tips</a>.</p>
<p>The main problem is that we have a list called <em>oldlist</em>
containing a lot of words with different cases (upper and lower case),
so we need to convert that words into only upper case words.</p>
<p>The simple initial solution would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">newlist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">oldlist</span><span class="p">:</span>
    <span class="n">newlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</pre></div>
</div>
<p>So, using <em>list comprehensions</em>, the code would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">newlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">oldlist</span><span class="p">]</span>
</pre></div>
</div>
<p>Providing a more simple, efficient and compact way of writing the first version.</p>
<p>A <em>list comprehension</em> consists of an <cite>expression</cite> followed by a <cite>for</cite> statement
and then you can use any expressions like another <cite>for</cite> or <cite>if</cite> statement.</p>
<p>The result of the <em>list comprehension</em> will be the evaluation of the expression
in the context provided by the programmer.</p>
<p>To clarify the concept, lets look the following examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vector</span><span class="p">]</span>
<span class="go">[6.283185307179586, -12.566370614359172, 15.707963267948966]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vector</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">]</span>
<span class="go">[-8, 10]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">e</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">e</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vector</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">]</span>
<span class="go">[5.43656365691809, -10.87312731383618]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">e</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vector</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">]</span>
<span class="go">[]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[[</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vector</span><span class="p">]</span>
<span class="go">[[1, 1], [-1, 1], [4, 16]]</span>
</pre></div>
</div>
<p>Be careful!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vector</span><span class="p">]</span>
<span class="go">File &quot;&lt;stdin&gt;&quot;, line 1</span>
<span class="go">   [x,x**2 for x in vector]</span>
<span class="go">              ^</span>
<span class="go">SyntaxError: invalid syntax</span>
</pre></div>
</div>
<p>You can perform the same with <cite>tuples</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vector</span><span class="p">]</span>
<span class="go">[(1, 1), (-1, 1), (4, 16)]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vec1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vec1</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">vec2</span><span class="p">]</span>
<span class="go">[8, 6, -18, 16, 12, -36, 24, 18, -54]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vec1</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">vec2</span><span class="p">]</span>
<span class="go">[6, 5, -7, 8, 7, -5, 10, 9, -3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">vec1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">vec2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vec1</span><span class="p">))]</span>
<span class="go">[8, 12, -54]</span>
</pre></div>
</div>
</div>
<div class="section" id="functions-as-parameters">
<h2>Functions as parameters<a class="headerlink" href="#functions-as-parameters" title="Permalink to this headline">¶</a></h2>
<p>In Python, the functions are values as any other kind of value.
For example, it is possible to create a new name with a simple assignation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">multiplication</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span><span class="n">e2</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">e1</span><span class="o">*</span><span class="n">e2</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">multiplication</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">multiplication</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="go">12</span>
</pre></div>
</div>
<p>One of the advantages of this characteristic is that it is possible
to create functions which receive other functions as parameters.</p>
<p>In the following example, we define a function called <cite>my_sum</cite>
which returns the sum of the values lower than <cite>n</cite>,
but before that, it applies a function received in the <cite>f</cite> parameter.</p>
<p>The program calls the function <cite>my_sum</cite> three times,
in each case a different function is given as parameter.
In this way, it is possible to use the same function to calculate
the sum of the values until 1000,
the sum of the squares until 1000
and the sum of the cubes until 1000.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">my_sum</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>

<span class="k">def</span> <span class="nf">cube</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">3</span>

<span class="k">print</span> <span class="n">my_sum</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">identity</span><span class="p">)</span>
<span class="k">print</span> <span class="n">my_sum</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">square</span><span class="p">)</span>
<span class="k">print</span> <span class="n">my_sum</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">cube</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="map-function">
<h2><cite>map()</cite> function<a class="headerlink" href="#map-function" title="Permalink to this headline">¶</a></h2>
<p>The <cite>map</cite> structure is very simple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">map</span><span class="p">(</span><span class="n">function</span><span class="p">,</span><span class="n">iterable</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Which means, that each given element (of the iterable) will be passed through a function evaluation,
and returning a result list.</p>
<p>It is possible to give additional iterable arguments,
but the function must take all the arguments and be applied to the items
from the iterable in parallel.</p>
<p>If there are several arguments,
the function <cite>map</cite> returns an entire list of tuples,
with the items from all the iterable.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">double</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="n">double</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="go">[2, 4, 6, 8, 10, 12, 14, 16, 18, 20]</span>
</pre></div>
</div>
<p>It is possible to give more than one sequence,
but it is important to give the same number of sequences as the function parameters:</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">seq1</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seq2</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seq1</span>
<span class="go">[0, 1, 2, 3, 4, 5, 6, 7]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seq2</span>
<span class="go">[10, 20, 30, 40, 50, 60, 70, 80]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">seq1</span><span class="p">,</span> <span class="n">seq2</span><span class="p">)</span>
<span class="go">[10, 21, 32, 43, 54, 65, 76, 87]</span>
</pre></div>
</div>
<p>Since it&#8217;s a built-in function,
it will be very useful for simple tasks,
so <cite>map</cite> will be available any time.</p>
<p>For example, if we need to calculate the power of several
numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="go">243</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="go">1024</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span>
<span class="go">177147</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span>
<span class="go">16777216</span>
</pre></div>
</div>
<p>we can easily do this simple task with the <cite>map</cite> function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="nb">pow</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
<span class="go">[1024, 177147, 16777216]</span>
</pre></div>
</div>
</div>
<div class="section" id="reduce-function">
<h2><cite>reduce()</cite> function<a class="headerlink" href="#reduce-function" title="Permalink to this headline">¶</a></h2>
<p>The <cite>reduce</cite> structure is:</p>
<div class="highlight-python"><pre>reduce(function, iterable[, initializer])</pre>
</div>
<p>This function gives the possibility to apply a function of two arguments to the items of the iterable,
to obtain a final single value.</p>
<p>The evaluation of the function is from left to right,
taking the given elements,</p>
<p>for example if we want to subtract a list of numbers,
like <tt class="docutils literal"><span class="pre">9,4,3,2</span></tt>, the internal behaviour of the <cite>reduce</cite> function
would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(((</span><span class="mi">9</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>which is different result, in comparison to the substraction
of the list <tt class="docutils literal"><span class="pre">2,3,4,9</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(((</span><span class="mi">2</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="o">-</span><span class="mi">9</span><span class="p">)</span> <span class="o">=</span> <span class="o">-</span><span class="mi">14</span>
</pre></div>
</div>
<p>So, the code would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">subs</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="n">subs</span><span class="p">,[</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="n">subs</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
<span class="go">-14</span>
</pre></div>
</div>
<p>If there is an optional initializer,
it is placed before the items of the iterable in the calculation,
and give us a default result if the iterable is empty.</p>
<p>Another simple example, would be to reduce a list of numbers
between 5 and 20, using a sum:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">21</span><span class="p">))</span>
<span class="go">200</span>
</pre></div>
</div>
<p>If there is only one item in the iterable sequence, its value
is returned:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">1</span>
</pre></div>
</div>
<p>If the iterable sequence is empty,
an exception is raised.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[])</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">reduce() of empty sequence with no initial value</span>
</pre></div>
</div>
<p>As we said previously, the initializer is a kind of safe-status
to avoid some weird behaviour, or just a default value to prevent
an exception:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_sum</span><span class="p">(</span><span class="n">seq</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="go">55</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_sum</span><span class="p">([])</span>
<span class="go">0</span>
</pre></div>
</div>
</div>
<div class="section" id="filter-function">
<h2><cite>filter()</cite> function<a class="headerlink" href="#filter-function" title="Permalink to this headline">¶</a></h2>
<p>The <cite>filter</cite> structure is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">filter</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">)</span>
</pre></div>
</div>
<p>The main idea of the <cite>filter</cite> function is to construct a list from an initial <tt class="docutils literal"><span class="pre">iterable</span></tt>,
but only with the elements which satisfies a condition inside the <tt class="docutils literal"><span class="pre">function</span></tt>.</p>
<p>If the iterable has a special data type,
like <cite>string</cite> or <cite>tuple</cite> the result also has that type.</p>
<p>Another case is when the iterable is <cite>None</cite>,
assuming an indentity function,
all the elements of the iterable which are false are removed.</p>
<p>Remembering the <em>list comprehension</em> we can note two situations:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">filter(function,</span> <span class="pre">iterable)</span></tt> is equivalent to :</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">[item</span> <span class="pre">for</span> <span class="pre">item</span> <span class="pre">in</span> <span class="pre">iterable</span> <span class="pre">if</span> <span class="pre">function(item)]</span></tt> if function is <cite>not</cite> None, and</li>
<li><tt class="docutils literal"><span class="pre">[item</span> <span class="pre">for</span> <span class="pre">item</span> <span class="pre">in</span> <span class="pre">iterable</span> <span class="pre">if</span> <span class="pre">item]</span></tt> if function is None.</li>
</ul>
</div></blockquote>
<p>For example,
if we need to determine the primes up to 20:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">primes</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">!=</span> <span class="mi">0</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span><span class="p">(</span><span class="n">primes</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>
<span class="go">[5, 7, 11, 13, 17, 19]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span> <span class="k">if</span> <span class="n">primes</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
<span class="go">[1, 5, 7, 11, 13, 17, 19]</span>
</pre></div>
</div>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Using <em>list comprehension</em>:</li>
</ul>
<blockquote>
<div><ul>
<li><p class="first">Write in one line of code a way to remove the vocals of a word:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">word</span> <span class="o">=</span> <span class="s">&#39;hello world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># your code here</span>
<span class="go">[&#39;h&#39;, &#39;l&#39;, &#39;l&#39;, &#39; &#39;, &#39;w&#39;, &#39;r&#39;, &#39;l&#39;, &#39;d&#39;]</span>
</pre></div>
</div>
</li>
<li><p class="first">Write in one line of code a way to determinate the pow at two of the
odd numbers in a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># your code here</span>
<span class="go">[1, 9, 25, 49]</span>
</pre></div>
</div>
</li>
<li><p class="first">Write in one line of code a way to write in upper-case, lower-case
and the length of a list of words in  several tuples.
Remember the functions <em>str.upper()</em>, <em>str.lower()</em> and <em>len(str)</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;The&#39;</span><span class="p">,</span> <span class="s">&#39;yellow&#39;</span><span class="p">,</span> <span class="s">&#39;duck&#39;</span><span class="p">,</span> <span class="s">&#39;swim&#39;</span><span class="p">,</span> <span class="s">&#39;over&#39;</span><span class="p">,</span> <span class="s">&#39;the&#39;</span><span class="p">,</span> <span class="s">&#39;lake&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># your code here</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<ul>
<li><p class="first">Having this functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">lower</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span>
<span class="k">def</span> <span class="nf">greater</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span>
</pre></div>
</div>
<p>write another function called <em>mm()</em>
which receive a function and some numbers
returning the greatest or the lowest number
using the previous functions.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mm</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mm</span><span class="p">(</span><span class="n">greater</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">9</span>
</pre></div>
</div>
</li>
<li><p class="first">Write a function which <em>map</em> a list of numbers
to a Fibonacci function, which return the <em>i-th</em>
number of the Fibonacci sequence where <em>i</em> is one
of the elements in the list of numbers.</p>
<p>Remember the Fibonacci definition.</p>
<div class="math">
\[\begin{split}F_{0} = 0,\\
F_{1} = 1,\\
F_{k} = F_{k-1} + F_{k-2},\ when\ k\ \geq\ 2\end{split}\]</div>
<p>Writing a Fibonacci function, the behaviour would be
as following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="go">1 2 8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
<span class="go">21 8 144</span>
</pre></div>
</div>
</li>
<li><p class="first">Write a function which change the consonants of a word
from lower-case to upper-case using the <em>map</em> function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="n">change_case</span><span class="p">,</span> <span class="s">&#39;hello world&#39;</span><span class="p">)</span>
<span class="go">HeLLo WoRLD</span>
</pre></div>
</div>
</li>
<li><p class="first">Using the function <em>filter()</em>,
define a function <em>long_words()</em> which takes a list of words
and an integer <em>n</em>, and returns the list of words that are lowest than <em>n</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">long_words</span><span class="p">([</span><span class="s">&#39;hello&#39;</span><span class="p">,</span><span class="s">&#39;dog&#39;</span><span class="p">,</span><span class="s">&#39;department&#39;</span><span class="p">,</span><span class="s">&#39;cat&#39;</span><span class="p">,</span><span class="s">&#39;antenna&#39;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">[&#39;hello&#39;,&#39;dog&#39;,&#39;cat&#39;]</span>
</pre></div>
</div>
</li>
<li><p class="first">Implement your own versions of the functions <em>map()</em>, <em>reduce()</em>
and <em>filter()</em>, compare it with the original ones.</p>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Lecture 18 - Higher-order functions</a><ul>
<li><a class="reference internal" href="#list-comprehension">List comprehension</a></li>
<li><a class="reference internal" href="#functions-as-parameters">Functions as parameters</a></li>
<li><a class="reference internal" href="#map-function"><cite>map()</cite> function</a></li>
<li><a class="reference internal" href="#reduce-function"><cite>reduce()</cite> function</a></li>
<li><a class="reference internal" href="#filter-function"><cite>filter()</cite> function</a></li>
<li><a class="reference internal" href="#exercises">Exercises</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="lecture17.html"
                        title="previous chapter">Lecture 17 - Advanced topics on functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lecture19.html"
                        title="next chapter">Lecture 19 - Iterators</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/lectures/week5/lecture18.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="lecture19.html" title="Lecture 19 - Iterators"
             >next</a> |</li>
        <li class="right" >
          <a href="lecture17.html" title="Lecture 17 - Advanced topics on functions"
             >previous</a> |</li>
        <li><a href="../../index.html">sql-course 1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Fifth week</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Patricia Fredes, Joao Fuentes, Margarita Ortega.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>